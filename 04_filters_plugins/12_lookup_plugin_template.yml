---
# ansible-doc -t lookup -l
# lookup , query
- name: Calling Lookup Plug-ins Template
  hosts: localhost
  gather_facts: false
  tasks:

# Applying Data with a Template
  - name: Print Hello class
    vars:
      name: world!
    debug:
      msg: "{{ lookup('template', 'my.template.j2') }}"   # template

# Reading an Environment Variable on the Control Node
# {{ lookup('env','MY_PASSWORD') }}
  - debug:
      msg: "{{ lookup('env','SHELL') }}"   # env

# Reading Command Output on the Control Node
# pipe plug-in returns the raw output generated by the command
  - debug:
      msg: "{{ query('pipe', 'ls files') }}"  # pipe

# lines plug-in splits the output of that command into lines
  - debug:
      msg: "{{ query('lines', 'ls files') }}"  # lines

# Getting Content from a URL
#  - debug:
#      msg: "{{ lookup('url', 'https://www.redhat.com') }}"  # url

# Getting Information from the Kubernetes API
#  - debug:
#      msg: "{{ lookup('k8s', kind='Deployment', namespace='ns', resource_name='my_res') }}"  # k8s

# Handling Lookup Error
  - debug:
      msg: "{{ lookup('k8s', kind='Deployment', namespace='ns', resource_name='my_res', errors='warn') }}"  # errors
# ignore - silently ignores the error and returns an empty string or list
# Strict - lookup plug-in raises a fatal error if the underlying script fails
# warn - the lookup plug-in logs a warning when the underlying script fails and returns an empty string (or an empty list)

